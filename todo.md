# TODO / Release Checklist（オシカケ）
> このファイルは「次に何をやるか」を迷わないためのメモ。
> GitHub Issueが増えすぎても、ここだけ見れば “今やること” が分かる状態を維持する。

---

## 0) いまの前提（現状コードから）
- 画面：LP / Pricing / Terms / Privacy / Support、アプリ側（Home/Matches/MatchDetail/Expenses/Stats/Savings/Settings/Account）、Admin（Console/Matches/Teams）
- 認証：現状は `VITE_OAUTH_PORTAL_URL` / `VITE_APP_ID` を使う方式（未設定の場合は /login にフォールバック）
- プラン：Free/Plus/Pro（Free=観戦記録7件、Freeは広告あり、Statsは初回記録から1年）
- データ：試合データの同期・管理が存在（Admin/同期・CSVなども実装が進んでいる）

---

## 1) 公開（一般公開/限定公開）に向けた “Release Blockers”
### 1-1. LP→アプリ導線の整合
- [ ] **ログイン済みユーザーは `/`（LP）ではなく `/app` へ誘導**（LPに来ても自動リダイレクト or CTA差し替え）
- [ ] LP内の表現が実態と一致しているか再点検（特に「全クラブ対応」など）
- [ ] Pricingの表現が、コード上のEntitlementsと完全一致しているか確認（Free=7件、Stats期限、広告、Export等）

### 1-2. 認証方式の方針決定（MVP）
- [ ] 一般公開時のログイン方式を決める（当面は現方式のままでもOKだが、説明と導線は揃える）
- [ ] 将来「Google/Appleログイン」へ寄せる場合の移行方針を1枚で書く（後で迷わないため）

### 1-3. セキュリティ最低ライン（公開前に必須）
- [ ] 秘密情報の棚卸し（ENV/キー/URL/Stripe/Webhook）を確認し、漏れていないかチェック
- [ ] 依存関係の脆弱性チェック（npm audit等）と主要リスクの潰し込み
- [ ] APIにレート制限/ヘッダ（Helmet）/CORS方針を適用
- [ ] Stripe webhook運用の確認（署名検証、失敗時の再処理方針、ログ）

### 1-4. 運用（落ちたときに直せる最低限）
- [ ] 同期/課金の失敗が「画面 + ログ」で追える（Sync Status / Billing Status）
- [ ] 重大エラー時の連絡手段（最低限：ログ + 管理者が気づける導線）

---

## 2) MVP体験の磨き込み（最短ループ強化）
> 「観戦予定 → 支出 → 振り返り → 次の観戦予定」

- [ ] 試合詳細で「予定→観戦済み」への切替が分かりやすいか（迷うポイントの削除）
- [ ] 支出入力が“最短”になっているか（初期カテゴリ/よく使う項目/直近入力の再利用）
- [ ] Statsが「次の観戦予定」へ繋がる導線になっているか（CTAやリンク）

---

## 3) プラン差別化の“最終整合”
- [ ] Free制限（7件）に関する挙動統一（ボタン非活性/モーダル/Upgrade誘導/FAQ/Terms/Support）
- [ ] Plus/Pro差別化が UI/コピー/機能ゲート で一致しているか確認
- [ ] 「キャンペーン（期間限定Pro全開放/クーポン/トライアル）」を導入する場合、権限判定を一本化

---

## 4) データ運用（試合情報・チケット・結果）
- [ ] 試合データの登録/編集を **Adminで完結** できる状態にする（Airtable風の編集体験の仕上げ）
- [ ] CSVインポート/エクスポートの仕様確定（フィールド不一致防止）
- [ ] 2024シーズン以降の結果蓄積の運用手順を固める（誰が/いつ/どこを更新するか）
- [ ] 「過去試合になったらチケット情報は不要」など、データのライフサイクルを明文化

---

## 5) UI/テーマ（任意：後でもOK）
- [ ] サイト全体の背景/トーンをLPに揃える（Pricing/Terms/Privacy/Supportも）
- [ ] テーマ選択（現行カラー / Dark / Tokyonight風）を導入する場合、LP適用は工数を見て判断

---

## 6) “あとで困らない”ためのドキュメント整備
- [ ] 仕様書（ユーザー向け：何ができて何ができないか）
- [ ] 管理者マニュアル（Admin Consoleの操作、CSVの取り込み、運用ルール）
- [ ] リリースノート/変更履歴（自分が見返す用。将来ユーザー告知にも転用）

---

## メモ（今はやらない/将来）
- AI旅程提案、しおりPDF、オフライン、レシートOCR、他人の傾向分析（k匿名性）
- 全クラブ対応の“保証”は、データ供給/運用が整ってから
