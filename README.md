# オシカケ (Oshikake)

## このプロダクトがやりたいこと
**観戦の記録**と**観戦にかかる費用の記録**を残し、あとで振り返れる。  
その振り返りに必要な**試合結果**や**試合予定**も、同じサービスの中でまとめて見られる。

---

## 原体験（開発の出発点）

公式の観戦履歴ページには以下の不満があった：

- 観戦数と観戦勝率以外の情報がなく、振り返りとして物足りない
- 3シーズン分の「行った/行ってない」しか見返せず、体験として残らない
- 観戦した試合のメモや画像、移動手段、宿、費用まで一元管理できたら最高

この不満を解決したいことがオシカケ開発の出発点。

---

## プロダクト原則（固定）

1. **中心は「観戦の記録」と「観戦にかかる費用の記録」**
2. **振り返りに必要な「試合結果」「試合予定」を同じ場所で見られる**
3. **"行った/行ってない"ではなく、メモ/写真/移動/宿/費用を「試合1枚」にまとまる**
4. **あとから気持ちよく見返せる（検索・並び替え・集計・エクスポート）**

詳細: [docs/product-principles.md](./docs/product-principles.md)

---

## やりたいことを見失わないようにするチェック（Issue/実装前に必ず確認）
この変更は、次のどれを良くする？

- [ ] 観戦の記録（観戦日・メモ）を楽にする
- [ ] 観戦費用の記録を楽にする
- [ ] 振り返り（集計・一覧）を良くする
- [ ] 試合予定・結果を同じ場所で見られるようにする

**全部Noなら、v0.2以降に回すか、そもそも不要の可能性が高い。**

---

## MVP（できること）
MVPの定義・DoDは `MVP.md` に固定しています。  
- [MVP定義 / DoD](./MVP.md)

MVPは「同期 → 観戦記録 → 集計」の最短導線が迷わず使えることをゴールにします。

### 1) 試合の予定・結果を見られる（一覧/詳細）
- 試合一覧（年ごと）を表示
- 試合詳細で、対戦カード・会場・キックオフ・スコア等を確認できる

### 2) 観戦の記録と費用を残せる（試合詳細）
- 試合詳細で観戦ログ（`userMatches`）を **追加 / 編集 / 削除**
- MVPの入力項目は **観戦日 / 費用合計 / メモ** に固定
  - 観戦日（必須）
  - 費用合計（必須、0以上）
  - メモ（任意）

### 3) 振り返れる（Stats）
- `/stats` で以下を表示
  - 観戦数
  - 勝分敗（未確定含む）
  - 費用合計
  - 1試合あたり平均
- 年フィルタで切替
- 0件年は empty 表示

### 4) 安定性 / UX
- 失敗しても画面が落ちない（エラー表示＋再試行導線）
- モバイル幅で主要画面が破綻しない

---

## Routes
- `/matches`：試合一覧
- `/matches/:id`：試合詳細（観戦記録の追加/編集/削除）
- `/stats`：集計（年フィルタあり）

---

## ドキュメント
- セットアップ手順：[`SETUP.md`](./SETUP.md)
- MVP定義 / DoD：[`MVP.md`](./MVP.md)

---

## 今は後回し（例）
迷ったらここは後回しでOK（v0.2以降）
- 共有URL
- 演出/凝ったグラフ（最低限の集計が優先）
- 管理画面の作り込み（必要なら最小で）
- 同期の過度な高速化（まずは壊れないこと）

詳細: [docs/roadmap.md](./docs/roadmap.md)

---

## 料金プラン

| プラン | 記録可能試合 | 価値の中心 |
|--------|------------|-----------|
| Free | 7件まで | 体験お試し |
| Plus | 無制限 | 継続価値（制限解除） |
| Pro | 無制限 | 体験の深さ（振り返りの価値最大化） |

詳細: [docs/billing-design.md](./docs/billing-design.md)

---

## Tech Stack
- Frontend: React + Vite（`client/`）
- Routing: wouter
- Backend: Express + tRPC（`server/`）
- DB: MySQL + Drizzle ORM（`drizzle/`）
- Testing: Vitest

---

## Project Structure
-client/          # UI (Vite + React)
-server/          # Express + tRPC + scraping
-drizzle/         # Drizzle schema & migrations
-shared/          # shared types / utilities
-todo.md          # project plan

---

## License
MIT（`package.json` の `license` を参照）


