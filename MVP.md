# MVP定義 / DoD（オシカケ）

## このプロダクトがやりたいこと（迷子防止）
**観戦の記録**と**観戦にかかる費用の記録**を残し、あとで振り返れる。  
その振り返りに必要な**試合予定/結果**も、同じサービスの中でまとめて見られる。

> MVPの導線（最重要）
**観戦予定 → 支出 → 振り返り → 次の観戦予定**

---

## 迷子防止チェック（Issue/実装前に必ず確認）
この変更は、次のどれを良くする？

- [ ] 観戦予定を立てやすくする（試合予定の閲覧/選択/登録）
- [ ] 支出を記録しやすくする（入力/分類/あとから修正）
- [ ] 振り返りを良くする（集計/一覧/気づき）
- [ ] 次の観戦予定に繋がる（「次も行こう」と思える導線）

**全部Noなら、MVP外（v0.2以降）または不要の可能性が高い。**

---

## 現在のコード上の中核コンセプト（データ構造の前提）
- **Matches（試合）**：運営側が用意する試合データ（管理画面/CSV/外部同期など）
- **UserMatches（ユーザーの試合）**：ユーザーが「予定/観戦済み」を紐づける記録
- **Expenses（支出）**：観戦に紐づく支出（後から編集可能）
- **Stats（集計）**：年/シーズン単位の集計・振り返り
- **Plans（Free/Plus/Pro）**：機能制限と導線（Paywall/Upgrade）

---

## MVPで必ず提供する価値（v0.1の核）
### 価値1：観戦予定を“自分ごと”にできる
- 試合一覧から「行く/気になる」を判断できる
- 試合詳細で「予定/観戦済み」を記録できる

### 価値2：観戦にかかったお金を一元で残せる
- 試合に紐づく支出を記録できる（あとで修正できる）
- 合計が自動で分かる（「今回いくらかかった？」が一瞬で分かる）

### 価値3：あとで振り返って、次の観戦に繋げられる
- 集計（観戦数/勝分敗/費用/平均など）を見返せる
- 試合予定/結果と観戦記録が同じサービス内で完結する

---

## MVPのユーザーストーリー（最短）
1. ユーザーはログイン/登録できる（導線に迷わない）
2. ユーザーはチームを選ぶ（オンボーディング）
3. ユーザーは試合一覧から試合詳細へ行ける
4. ユーザーは試合詳細で「予定/観戦済み」を記録できる
5. ユーザーは支出を追加し、合計を確認できる
6. ユーザーはStatsで「振り返り」ができる
7. 制限に達したら理由が分かり、Upgradeに自然に繋がる（Free→Plus/Pro）

---

## 画面要件（MVPの“最低限”）
### 公開ページ
- `/`（LP）
- `/pricing`（料金）
- `/terms` `/privacy` `/support`（最低限の法務/サポート）

### 認証
- `/login` `/signup`（現状の認証方式でOK。将来Google/Appleに寄せるのは別Issue）

### アプリ（ログイン必須）
- `/app`（ホーム/ダッシュボード）
- `/matches`（試合一覧）
- `/matches/:id`（試合詳細 + 記録）
- `/expenses`（支出一覧/入力）
- `/stats`（集計）
- `/settings`（設定）
- `/account`（課金導線/ポータル/アカウント）

---

## プラン仕様（現行コードの前提）
> ※「仕様（ドキュメント/LP/Pricing）」は **この定義と完全一致** させること

### Free
- 観戦記録（観戦済み）作成上限：**7件**
- Ads：**表示あり**
- Stats閲覧期限：**初回の観戦記録日 + 1年**
- Export：不可
- カテゴリ自由設定：不可
- 複数シーズン/高度な集計：不可

### Plus
- 観戦記録上限：無制限（現行コード）
- Ads：なし
- Export：可
- Stats：無制限
- 「過去の自分（pastSelf）」：可（現行Feature Gate）

### Pro
- Plusの全て
- 高度な集計：可
- 複数シーズン：可
- カテゴリ自由設定：可
- 優先サポート：可

---

## MVPの非目標（v0.1ではやらない/後回し）
- AI旅程提案、観光/ホテル提案、しおりPDF、オフライン、レシートOCR
- “他の人の傾向”の公開分析（k匿名性など含めるなら別スコープ）
- 全チーム完全対応を保証する表現（データ供給が整ってから）

---

## DoD（Definition of Done）
MVP（v0.1）は以下をすべて満たしたら完了。

- [ ] 認証導線が迷わない（ログイン/サインアップが動く）
- [ ] オンボーディング（チーム選択）が完了できる
- [ ] 試合一覧が見られる（データ欠損でも落ちない）
- [ ] 試合詳細が見られる（欠損でも落ちない）
- [ ] 試合詳細で「予定/観戦済み」を保存できる
- [ ] 支出が追加/編集/削除でき、合計が把握できる
- [ ] Statsが表示され、0件の状態でも導線がある
- [ ] Free制限（7件）に達したときの挙動が統一されている（表示/モーダル/Upgrade導線）
- [ ] エラー表示が統一され、落ちない＆再試行できる
- [ ] モバイルでレイアウト崩れがない（主要画面）
- [ ] 公開前チェック（最低限のセキュリティ/運用確認）を実施し、記録が残っている
